---
author: Hugo Authors
title: C语言-输入输出
date: 2022-05-08
description:  C语言
series:
  - C语言

---

输入输出

<!--more-->

# 输出
  在C语言中，有三个函数是用来输出数据的：
   - puts():只能输出字符串，并且输出后会自动换行。
   - putchar():只能输出单个字符。
   - printf():可以输出各种类型的数据
  在这里我们重点介绍printf()函数。
  
  ## printf()函数
   printf()格式控制符的完整形式。
   ```c
    %[flag][width][.precision]type
   ```
   - `type`表示输出类型。
   - `width`表示最小输出宽度，也就是最小占几个字符的位置
   - `.precision`表示输出精度，也就是小数的位数。
     - 当小数的位数大于precision时，会按照四舍五入的原则丢掉多余的字符。
     - 当小数部分的位数小于precision时，会在后面补0。
     - 当用于整数或者字符串时
       1. 用于整数时，`.precision`表示最小输出宽度。与`width`不同的是，整数的宽度不足时会在左边补0，而不是补空格。
       2. 用于字符串时，`.precision`表示最大输出宽度，或者说截取字符串，当字符串长度大于`precision`时，会截掉多余字符；当字符串小于`precision`时，`.precision`将不再起到作用。
     - flag是标志字符。例如，`%#x`中flag对应#`%-9d`中flag对应`-`：
     
|标志字符|	含  义|
| ------- | ----------- |
|-|	`-`表示左对齐。如果没有，就按照默认的对齐方式，默认一般为右对齐。|
|+|	用于整数或者小数，表示输出符号（正负号）。如果没有，那么只有负数才会输出符号。|
|空格|	用于整数或者小数，输出值为正时冠以空格，为负时冠以负号。|
|#|	对于八进制（%o）和十六进制（%x / %X）整数，# 表示在输出时添加前缀；八进制的前缀是 0，十六进制的前缀是 0x / 0X。
||对于小数（%f / %e / %g），# 表示强迫输出小数点。如果没有小数部分，默认是不输出小数点的，加上 # 以后，即使没有小数部分也会带上小数点。|

   有的时候我们并不想程序立即输出结果，我们可以利用一个小的函数将他们的时间控制一下。
   - Mac OS或Linux中的写法为sleep(5);表示程序暂停5秒。
   - Windows中的写法为Sleep(5000);同样表示暂停五秒，但是在Windows中使用毫秒来换算的，并不是直接的5秒。

# 输入函数
  在输入函数我们也同样是三个输入函数：
   - scanf()：和printf()类似，scanf()可以输入多类型数据。
   - getchar()、getche()、getch()：这三个函数都是用来输入单个字符的。
   - gets()：获取一行数据并作为字符串处理。
  
  ## scanf()函数
  scanf是scan format 的缩写，意思是格式化扫描，也就是从键盘获得用户输入，和printf的功能刚好相反。它的格式和printf()函数不同的是在变量名前要加上一个“`&`”取地址符，也就是获取变量在内存中的地址。
  
  对于scanf()，输入数据的格式要和控制字符串的格式保持一致。
  在输入时我们需要著一些细小的问题，不然程序会提示你出错误，例如：
  ```c
   #include <stdio.h>
   int main()
   {
    int a, b, c;
    scanf("%d %d", &a, &b);
    printf("a+b=%d\n", a+b);
    scanf("%d   %d", &a, &b);
    printf("a+b=%d\n", a+b);
    scanf("%d, %d, %d", &a, &b, &c);
    printf("a+b+c=%d\n", a+b+c);
   
    scanf("%d is bigger than %d", &a, &b);
    printf("a-b=%d\n", a-b);
    return 0;
   }
  ```
  它的输入输出是
  ```
   10    20↙
   a+b=30
   100 200↙
   a+b=300
   56,45,78↙
   a+b+c=179
   25 is bigger than 11↙
   a-b=14
  ```
  下面我将它们解释一下。

  第一个scanf()的格式控制字符串为`"%d %d"`,中间有一个空格，我们输入时在中间空了很多个空格。第二个scanf(),我们并没有添加很多个空格只在分隔的时候填入了一个空格，它们都一样正确输出了，也就说明，scanf()函数对于空格的管理并不需要严格对应，多几个少几个并没有什么区别。

  第三个scanf()的控制字符串为`"%d,%d,%d"`,中间以逗号隔开，所以输入的整数也应该用逗号隔开

  第四个scanf()则是要求整数中间以`is bigger than`隔开。

  用户每次按下回车键，程序都会认为完成了一次输入操作，scanf()开始读取用户输入的内容，并根据格式控制字符串从中提取有效数据，只要用户输入的内容和格式控制字符串匹配，就能够正确提取

  本质上讲，用户输入的内容都是字符串，scanf()完成的是从字符串提取有效数据的过程。

  ## 连续输入
   从本质上讲，我们从键盘上输入的数据并没有直接交给scanf()函数，而是放入了缓冲区，直到我们按下回车键，scanf()函数才从缓冲区读取数据。如果缓冲区的数据符合scanf()的要求，那么就代表输入结束；如果不符合要求则会等待用户继续输入，或者干脆判定失败。

   例如：
   ```c
    #include <stdio.h>
    int main()
    {
      int a = 1, b = 2, c = 3, d = 4;  //修改处：给变量赋予不同的初始值
      scanf("%d", &a);
      scanf("%d", &b);
      printf("a=%d, b=%d\n", a, b);
      scanf("%d %d", &c, &d);
      printf("c=%d, d=%d\n", c, d);
   
      return 0;
    }
   ```
   结果：
   ```
    12 60 a10↙
    a=12, b=60
    c=3, d=4
   ```
   这个程序说明了scanf()不会跳过不符合要求的数据，遇到不符合要求的数据会读取失败，而不是等待用户继续输入，所以上述程序中的c和d的值并没有发生改变。

   所以正是因为缓冲区的存在才能让我们多输入一些数据，或者说一次性输入所有数据，你可以认为这是缓冲区的优势，但正因为这个优势，也造就了它拥有了一些负面影响。

   它的缓冲区